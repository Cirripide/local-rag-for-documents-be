asyncapi: '3.0.0'
info:
  title: Chat with AI Service
  version: '1.0.0'
  description: >
    A WebSocket chat service to interact with an artificial intelligence.
    Communication occurs through the exchange of text messages.

servers:
  development:
    host: 'localhost'
    protocol: ws
    description: Local development server

operations:
  sendMessageToAI:
    action: send
    channel:
      $ref: '#/channels/api-v1-chat-conversationId'
    summary: The client sends a text message to the AI.
    messages:
      - $ref: '#/channels/api-v1-chat-conversationId/messages/textMessage'

  receiveMessageFromAI:
    action: receive
    channel:
      $ref: '#/channels/api-v1-chat-conversationId'
    summary: The server (AI) responds with a text message.
    messages:
      - $ref: '#/channels/api-v1-chat-conversationId/messages/textMessage'

channels:
  api-v1-chat-conversationId:
    address: '/api/v1/chat/{conversationId}'
    parameters:
      conversationId:
        description: The unique ID of the conversation.
        location: '$message.payload#/conversationId'
    messages:
      textMessage:
        name: textMessage
        title: Text Message
        summary: A simple message containing a text string.
        contentType: 'text/plain'
        payload:
          type: object
          properties:
            conversationId:
              type: string
              description: The unique ID of the conversation.
            message:
              type: string
              description: The textual content of the message.
              examples:
                - 'Hi, how are you?'
                - 'What is the capital of France?'
          required:
            - conversationId
            - message
